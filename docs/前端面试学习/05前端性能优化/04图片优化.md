# 图片优化

## 1. 为什么图片优化对前端性能很重要？
**答案**：图片优化很重要，因为：
1. 图片通常占据页面大部分的下载量
2. 大图片会延长页面加载时间
3. 移动设备上，大图片会消耗更多的带宽和电量
4. 图片优化可以显著提升用户体验和页面性能

## 2. 什么是响应式图片？如何实现？
**答案**：响应式图片是根据设备屏幕大小和分辨率自动调整的图片。实现方法：
1. 使用srcset和sizes属性
2. 使用picture元素
3. 使用CSS媒体查询

示例：
```html
<img srcset="small.jpg 300w, medium.jpg 600w, large.jpg 900w"
     sizes="(max-width: 300px) 300px, (max-width: 600px) 600px, 900px"
     src="fallback.jpg" alt="Responsive image">
```

## 3. 什么是图片懒加载？如何实现？
**答案**：图片懒加载是一种延迟加载图片的技术，只有当图片进入（或接近）视口时才加载。实现方法：
1. 使用Intersection Observer API
2. 使用scroll事件（性能较差）
3. 使用第三方库如lazysizes

示例（使用Intersection Observer）：
```javascript
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const img = entry.target;
      img.src = img.dataset.src;
      observer.unobserve(img);
    }
  });
});

document.querySelectorAll('img[data-src]').forEach(img => observer.observe(img));
```

## 4. 如何选择合适的图片格式？
**答案**：选择图片格式的考虑因素：
1. JPEG：适合照片和复杂图像，有损压缩
2. PNG：适合需要透明度的图像，无损压缩
3. WebP：Google开发的格式，同时支持有损和无损压缩，文件更小
4. SVG：适合图标和简单图形，可缩放
5. AVIF：新一代图像格式，压缩率更高

根据图片内容和用途选择合适的格式。

## 5. 什么是图片精灵（CSS Sprites）？它如何提高性能？
**答案**：图片精灵是将多个小图标或图片合并到一个大图片中，然后通过CSS的background-position属性显示所需部分。它提高性能因为：
1. 减少HTTP请求数
2. 减少总下载量（一个大文件通常小于多个小文件的总和）
3. 减少服务器负载

使用示例：
```css
.icon {
    background-image: url('sprites.png');
    width: 16px;
    height: 16px;
}
.icon-home { background-position: 0 0; }
.icon-user { background-position: -16px 0; }
```

## 6. 如何使用WebP格式？如何处理浏览器兼容性？
**答案**：使用WebP并处理兼容性：
1. 使用picture元素提供多种格式
2. 服务器端根据Accept头选择合适的格式
3. 使用JavaScript检测WebP支持并动态替换

示例：
```html
<picture>
  <source srcset="image.webp" type="image/webp">
  <img src="image.jpg" alt="Fallback image">
</picture>
```

## 7. 如何优化背景图片？
**答案**：优化背景图片的方法：
1. 使用CSS渐变代替简单的背景图片
2. 对于大背景图，考虑使用media query根据屏幕大小加载不同尺寸
3. 使用background-size: cover适配不同屏幕
4. 考虑使用SVG作为背景图，特别是对于图标和简单图形
5. 使用WebP格式（配合回退方案）

## 8. 什么是图片CDN？它如何提升性能？
**答案**：图片CDN是专门用于存储和分发图片的内容分发网络。它提升性能因为：
1. 就近服务，减少延迟
2. 自动选择最佳格式和大小
3. 提供实时图片处理（如裁剪、压缩）
4. 缓存优化
5. 减轻源服务器负载

## 9. 如何使用SVG？SVG相比于位图有什么优势？
**答案**：使用SVG：
1. 直接在HTML中嵌入SVG代码
2. 使用img标签引用SVG文件
3. 作为背景图片使用

SVG的优势：
1. 可无损缩放
2. 文件体积通常较小
3. 可以通过CSS和JavaScript操作
4. 适合图标和简单图形

## 10. 如何在开发过程中进行图片优化？
**答案**：开发过程中的图片优化：
1. 使用构建工具（如webpack）自动优化图片
2. 使用图片压缩工具（如TinyPNG）
3. 使用适当的图片格式和大小
4. 实现懒加载
5. 使用响应式图片技术
6. 考虑使用现代图片格式（如WebP, AVIF）
7. 使用图片CDN
8. 定期审查和更新网站图片
